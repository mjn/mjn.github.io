<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{{ title }} | Mark Northcott</title>
  <link rel="stylesheet" href="/assets/css/main.css">
  <script>
    // Check for saved theme preference, otherwise use system preference
    const getTheme = () => {
      if (typeof localStorage !== 'undefined' && localStorage.getItem('theme')) {
        return localStorage.getItem('theme');
      }
      if (window.matchMedia('(prefers-color-scheme: light)').matches) {
        return 'light';
      }
      return 'terminal'; // Default
    };

    const applyTheme = (theme) => {
      const html = document.documentElement;
      if (theme === 'light') {
        html.classList.add('light-mode');
        html.classList.remove('terminal-mode');
      } else {
        html.classList.add('terminal-mode');
        html.classList.remove('light-mode');
      }
      localStorage.setItem('theme', theme);
    };

    applyTheme(getTheme());
  </script>
</head>
<body class="min-h-screen p-8 transition-colors duration-300" data-input-path="{{ page.inputPath }}">
  <header class="mb-8 font-mono flex justify-between items-center">
    <nav>
      <span class="text-terminal-prompt">mark@northcott.io:~$</span>
      <a href="/" class="text-terminal-accent hover:underline ml-2">home</a>
      <a href="/blog/" class="text-terminal-accent hover:underline ml-4">blog</a>
      <a href="/experience/" class="text-terminal-accent hover:underline ml-4">experience</a>
    </nav>
    <button id="theme-toggle" class="text-terminal-text hover:text-terminal-accent focus:outline-none">
      [Toggle Theme]
    </button>
  </header>
  <main>
    {{ content | safe }}
  </main>
  <footer class="mt-16 text-sm text-terminal-text opacity-50 font-mono">
    &copy; 2025 Mark Northcott
  </footer>

  <script>
    document.getElementById('theme-toggle').addEventListener('click', () => {
      const currentTheme = document.documentElement.classList.contains('light-mode') ? 'light' : 'terminal';
      const newTheme = currentTheme === 'light' ? 'terminal' : 'light';
      applyTheme(newTheme);
    });
  </script>
</body>
</html>
