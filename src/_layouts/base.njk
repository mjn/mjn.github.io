<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{{ title }} | Mark Northcott</title>
  <link rel="stylesheet" href="/assets/css/main.css">
  <script>
    // Check for saved theme preference, otherwise use system preference
    const getTheme = () => {
      if (typeof localStorage !== 'undefined' && localStorage.getItem('theme')) {
        return localStorage.getItem('theme');
      }
      return 'terminal'; // Default
    };

    const applyTheme = (theme) => {
      const html = document.documentElement;
      const themes = ['light-mode', 'everforest-mode', 'catppuccin-mode', 'gruvbox-mode'];
      themes.forEach(t => html.classList.remove(t));
      
      if (theme !== 'terminal') {
        html.classList.add(`${theme}-mode`);
      }
      localStorage.setItem('theme', theme);
    };

    applyTheme(getTheme());
  </script>
</head>
<body class="min-h-screen p-8 transition-colors duration-300" data-input-path="{{ page.inputPath }}">
  <header class="mb-8 font-mono flex justify-between items-center">
    <nav>
      <span class="text-terminal-prompt">mark@northcott.io:~$</span>
      <a href="/" class="text-terminal-accent hover:underline ml-2">home</a>
      <a href="/blog/" class="text-terminal-accent hover:underline ml-4">blog</a>
      <a href="/experience/" class="text-terminal-accent hover:underline ml-4">experience</a>
    </nav>
    <div class="flex items-center gap-1 text-terminal-text">
      <span>[theme:</span>
      <select id="theme-select" class="bg-transparent border-none text-terminal-accent hover:underline focus:outline-none font-mono cursor-pointer appearance-none">
        <option value="terminal">tokyo-night</option>
        <option value="light">light</option>
        <option value="everforest">everforest</option>
        <option value="catppuccin">catppuccin</option>
        <option value="gruvbox">gruvbox</option>
      </select>
      <span>]</span>
    </div>
  </header>
  <main>
    {{ content | safe }}
  </main>
  <footer class="mt-16 text-sm text-terminal-text opacity-50 font-mono">
    &copy; 2025 Mark Northcott
  </footer>

  <script>
    const themeSelect = document.getElementById('theme-select');
    themeSelect.value = getTheme();
    themeSelect.addEventListener('change', (e) => {
      applyTheme(e.target.value);
    });
  </script>
</body>
</html>
